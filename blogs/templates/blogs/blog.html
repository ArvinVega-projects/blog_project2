{% extends 'blogs/base.html' %}

{% block page_header %}
<h2>Blog Posts: {{ blog.text }}</h2>
{% endblock page_header %}

{% block content %}
  {% if user.is_authenticated %}
    <a href="{% url 'blogs:new_blogpost' blog.id %}"
      class="btn btn-primary btn-sm mt-1 mb-4">Add New Blog Post for {{ blog.text }}</a>
  {% endif %}
  
  {% for bp in blog_posts %}
    {% if bp.public == True %}
      <div class="card mb-3">
        <h5 class="card-header d-flex">
          {{ bp.title }}
            {% if request.user == bp.owner %}
              <span class="ms-auto text-muted">
                <div class="user-action-buttons">
                  <a href="{% url 'blogs:edit_blogpost' bp.id %}" class="btn btn-warning btn-sm">Edit Blog Post</a>
                  <a href="{% url 'blogs:delete_post' bp.id %}" class="btn btn-danger btn-sm">Delete Blog Post</a>
                </div>
              </span>
            {% endif %}
        </h5>
        <div class="card-body">{{ bp.text|linebreaks }}</div>
          <div class="card-footer">
            <p class="card-text text-muted">
              <small>
                Author: {{ bp.owner }} | Last Updated: {{ bp.date_updated|date:'M d, Y H:i' }}
              </small>
            </p>
          </div>
        </div>
    {% else %}
    {% endif %}
      </div>
  {% empty %}
    <p>There are no blog posts yet for {{ blog.text }}.</p>
  {% endfor %}


{% endblock content %}